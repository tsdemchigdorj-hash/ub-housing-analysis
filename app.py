import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt

# –í—ç–±–∏–π–Ω –≥–∞—Ä—á–∏–≥
st.title("üèôÔ∏è –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä —Ö–æ—Ç—ã–Ω –æ—Ä–æ–Ω —Å—É—É—Ü–Ω—ã “Ø–Ω–∏–π–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç")

# ”®–≥”©–≥–¥–ª–∏–π–≥ —É–Ω—à–∏—Ö (–§–∞–π–ª—ã–Ω –Ω—ç—Ä —è–≥ —Ç–∞–≥ —Ç–∞–∞—Ä–∞—Ö —ë—Å—Ç–æ–π)
@st.cache_data
def load_data():
    # .read_csv –±–∏—à, —Ö–∞—Ä–∏–Ω .read_excel –∞—à–∏–≥–ª–∞–Ω–∞
    # –•—ç—Ä—ç–≤ —Ñ–∞–π–ª —á–∏–Ω—å –æ–ª–æ–Ω —Ö—É—É–¥–∞—Å—Ç–∞–π –±–æ–ª sheet_name-–∏–π–≥ –∑–∞–∞–∂ ”©–≥—á –±–æ–ª–Ω–æ
    return pd.read_excel('ub_housing.csv', sheet_name=0)

try:
    df = load_data()
    st.success("”®–≥”©–≥–¥–ª–∏–π–≥ –∞–º–∂–∏–ª—Ç—Ç–∞–π —É–Ω—à–ª–∞–∞!")
    
    # –≠–Ω–¥ ”©–º–Ω”© –Ω—å –±–∏—á—Å—ç–Ω –±“Ø—Ö –≥—Ä–∞—Ñ–∏–∫ –∑—É—Ä–∞—Ö –∫–æ–¥—É—É–¥–∞–∞ (pivot_df –≥—ç—Ö –º—ç—Ç) “Ø—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç–Ω –±–∏—á–Ω—ç
    # –ñ–∏—à—ç—ç –Ω—å:
    pivot_df = df.pivot_table(index='–°–∞—Ä', columns='–î“Ø“Ø—Ä—ç–≥', values='–£—Ç–≥–∞', aggfunc='mean')
    st.line_chart(pivot_df) # –≠–Ω–≥–∏–π–Ω —Ö—É—Ä–¥–∞–Ω –≥—Ä–∞—Ñ–∏–∫ —Ö–∞—Ä–∞—Ö—ã–Ω —Ç—É–ª–¥
    
except Exception as e:
    st.error(f"–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞: {e}")
